{% extends "base.html" %}

{% block title %}Search Employees | Employee Skills Tracker{% endblock %}

{% block content %}
    <h1>Search Employees</h1>
    
    <form method="GET" action="{{ url_for('search_employees') }}" class="search-form">
        <div class="form-group">
            <label for="search_id">Employee ID:</label>
            <input type="number" id="search_id" name="id" value="{{ request.args.get('id', '') }}">
        </div>

        <div class="form-group">
            <label for="search_name">Name:</label>
            <input type="text" id="search_name" name="name" value="{{ request.args.get('name', '') }}" placeholder="Enter name...">
        </div>

        <div class="form-group">
            <label for="search_department">Department:</label>
            <select id="search_department" name="department" class="form-control">
              <option value="">All Departments</option>
              <option value="Marketing" {% if request.args.get('department') == 'Marketing' %}selected{% endif %}>Marketing</option>
              <option value="Admissions & Registration" {% if request.args.get('department') == 'Admissions & Registration' %}selected{% endif %}>Admissions & Registration</option>
              <option value="Student Affairs" {% if request.args.get('department') == 'Student Affairs' %}selected{% endif %}>Student Affairs</option>
              <option value="Human Resources" {% if request.args.get('department') == 'Human Resources' %}selected{% endif %}>Human Resources</option>
              <option value="Finance & Procurement" {% if request.args.get('department') == 'Finance & Procurement' %}selected{% endif %}>Finance & Procurement</option>
              <option value="IT Services" {% if request.args.get('department') == 'IT Services' %}selected{% endif %}>IT Services</option>
              <option value="Research & Graduate Studies" {% if request.args.get('department') == 'Research & Graduate Studies' %}selected{% endif %}>Research & Graduate Studies</option>
              <option value="Facilities & Maintenance" {% if request.args.get('department') == 'Facilities & Maintenance' %}selected{% endif %}>Facilities & Maintenance</option>
              <option value="International Affairs" {% if request.args.get('department') == 'International Affairs' %}selected{% endif %}>International Affairs</option>
            </select>
          </div>

        <div class="form-group">
            <label for="search_skill">Technical Skill:</label>
            <input type="text" id="search_skill" name="skill" value="{{ request.args.get('skill', '') }}" placeholder="Enter...">
        </div>
        <div class="form-group">
            <label for="search_skill">Business Skill:</label>
            <input type="text" id="search_skill" name="skill" value="{{ request.args.get('skill', '') }}" placeholder="Enter...">
        </div>
        <div class="form-group">
            <label for="search_skill">Language Skill:</label>
            <input type="text" id="search_skill" name="skill" value="{{ request.args.get('skill', '') }}" placeholder="Enter...">
        </div>

        <button type="submit" class="btn btn-primary">Search</button>
        <a href="{{ url_for('search_employees') }}" class="btn btn-secondary">Clear</a>
    </form>

    {% if employees %}
        <h2>Search Results</h2>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Department</th>
                    <th>Technical Skills</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for employee in employees %}
                <tr>
                    <td>{{ employee.id }}</td>
                    <td>{{ employee.name }}</td>
                    <td>{{ employee.department }}</td>
                    <td>{{ employee.skills.Technical|join(', ') }}</td>
                    <td>
                        <a href="{{ url_for('employee_detail', employee_id=employee.id) }}" class="btn btn-primary btn-sm">View</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% elif request.args %}
        <p class="no-results">No employees found matching your search criteria.</p>
    {% endif %}
{% endblock %}
