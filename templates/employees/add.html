{% extends "base.html" %}

{% block title %}Add Employee | Employee Skills Tracker{% endblock %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/employee_form.css') }}">
{% endblock %}

{% block content %}
<div class="form-container">
    <h1><i class="fas fa-user-plus"></i> Add New Employee</h1>
    
    {% include '_flash_messages.html' %}
    
    <form method="POST" action="{{ url_for('add_employee') }}">
        <div class="form-section">
            <h2><i class="fas fa-id-card"></i> Basic Information</h2>
            <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" id="name" name="name" required>
            </div>
            
            <div class="form-group">
                <label for="department">Department</label>
                <select id="department" name="department" required>
                    <option value="">Select a department</option>
                    {% for dept in departments %}
                    <option value="{{ dept }}">{{ dept }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        
        <div class="form-section">
            <h2><i class="fas fa-cogs"></i> Technical Skills</h2>
            <div id="technical-skills-container">
                <div class="form-group">
                    <input type="text" name="technical_skills[]">

                </div>
            </div>
            <button type="button" onclick="addSkillField('technical-skills-container', 'technical_skills[]')">Add Skill</button>
        </div>
        <div class="form-section">
            <h2><i class="fas fa-briefcase"></i> Business Skills</h2>
            <div id="business-skills-container">
                <div class="form-group">
                    <input type="text" name="business_skills[]">

                </div>
            </div>
            <button type="button" onclick="addSkillField('business-skills-container', 'business_skills[]')">Add Skill</button>
        </div>
        <div class="form-section">
            <h2><i class="fas fa-language"></i> Languages</h2>
            <div id="languages-container">
              <div class="form-group">
                <input type="text" name="language[]" placeholder="Language">
                <select name="language_level[]">
                  <option value="Basic">Basic</option>
                  <option value="Intermediate">Intermediate</option>
                  <option value="Fluent">Fluent</option>
                  <option value="Native">Native</option>
                </select>
              </div>
            </div>
            <button type="button" onclick="addLanguageField()">Add Language</button>
          </div>
          
         
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Save Employee
            </button>
            <a href="{{ url_for('list_employees') }}" class="btn btn-secondary">
                <i class="fas fa-times"></i> Cancel
            </a>
        </div>
    </form>
</div>
<script>
    function addLanguageField() {
      const container = document.getElementById('languages-container');
      const field = document.createElement('div');
      field.classList.add('form-group');
      field.innerHTML = `
        <input type="text" name="language[]" placeholder="Language">
        <select name="language_level[]">
          <option value="Basic">Basic</option>
          <option value="Intermediate">Intermediate</option>
          <option value="Fluent">Fluent</option>
          <option value="Native">Native</option>
        </select>`;
      container.appendChild(field);
    }
    </script>
{% endblock %}